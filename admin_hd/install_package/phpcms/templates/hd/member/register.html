<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="user-scalable=no, width=device-width, initial-scale=1, maximum-scale=1">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>黄逗--注册</title>
    <link rel="stylesheet" href="{WEB_PATH}statics/hd/css/base.css">
    <link rel="stylesheet" href="{WEB_PATH}statics/hd/css/style.css">
    <link rel="shortcut icon" href="{WEB_PATH}statics/hd/images/favicon.ico">
</head>
<body class="login">

<div class="login-left">
    <img src="{WEB_PATH}statics/hd/images/icon/icon-logo-big.png" class="icon-login">

    <form method="post" action="" id="myform">
        <div class="r1">

            <div class="row">
                <!-- 添加class show 显示 -->
                <div id="username_txt" class="label"></div>
                <input type="text" i="0" id="username" maxlength="50" class="in" placeholder="请输入用户"/>
            </div>

            <div class="row">
                <div id="email_txt" class="label"></div>
                <input type="email" i="0" id="email" maxlength="50" class="in" placeholder="请输入邮箱"/>
            </div>

            <div class="row">
                <div class="label">请输入正确的密码</div>
                <input type="password" maxlength="50" class="in" placeholder="请输入密码"/>
            </div>

            <div class="row">
                <div class="label">请输入正确的密码</div>
                <input type="password" maxlength="50" class="in" placeholder="请再次输入密码"/>
            </div>

            <div class="r3">
                <button class="btn-login">注册</button>
            </div>

        </div>
    </form>

    <a href="#" class="u-login">游客登陆</a>

</div>

<div class="main">
    <div class="tr top">
        <p>请输入用户名及密码</p>
        <p>完成登陆</p>
    </div>

    <div class="bottom">
        <p>欢迎来到</p>
        <div>
            <span>黄逗</span>社区
        </div>
    </div>
</div>




<script src="{WEB_PATH}statics/hd/js/jquery.min.js"></script>
<script src="{WEB_PATH}statics/hd/js/index.js"></script>
<script>
    $(function(){
        $('#username').blur(function () {
            $('#username').attr('i',0);
            var username_val=$('#username').val();
            if(username_val.length<2 || username_val.length>20){
                $('#username_txt').removeClass('label_g');
                $('#username_txt').addClass('label');
                $('#username_txt').addClass('show');//label_g
                $('#username_txt').text('用户名在2-20位字符之间');
            }else {
                $.ajax({
                    url:'http://hd.qinpl.cn/index.php?m=member&c=index&a=public_checkname_ajax',
                    type:'GET', //GET
                    async:false,    //或false,是否异步
                    data:{
                        clientid:'username',
                        username:username_val
                    },
                    timeout:5000,    //超时时间
                    dataType:'script',    //返回的数据格式：json/xml/html/script/jsonp/text

                    success:function(data,textStatus,jqXHR){
                        if (data==1){
                            $('#username_txt').removeClass('show');
                            $('#username_txt').removeClass('label');
                            $('#username_txt').addClass('label_g');
                            $('#username_txt').text('验证成功！');
                            $('#username_txt').addClass('show');
                            $('#username').attr('i',1);
                        }
                        if (data==0){
                            $('#username_txt').removeClass('show');
                            $('#username_txt').removeClass('label_g');
                            $('#username_txt').addClass('label');
                            $('#username_txt').text('用户名已经存在！');
                            $('#username_txt').addClass('show');
                        }
                    },
                    error:function(xhr,textStatus){
                        console.log('错误');
                    }
                })
            }
        });

        $('#email').blur(function () {
            $('#email').attr('i',0);
            var email_val=$('#email').val();
            var filter = /^(\w-*\.*)+@(\w-?)+(\.\w{2,})+$/;
            if(!filter.test(email_val)){
                $('#email_txt').removeClass('label_g');
                $('#email_txt').addClass('label');
                $('#email_txt').addClass('show');//label_g
                $('#email_txt').text('邮箱格式错误！');
            }else {
                $.ajax({
                    url:'http://hd.qinpl.cn/index.php?m=member&c=index&a=public_checkemail_ajax',
                    type:'GET', //GEThttp://hd.qinpl.cn/index.php?clientid=email&email=1017962047%40qq.com&m=member&c=index&a=public_checkemail_ajax&_=1536117935413
                    async:false,    //或false,是否异步http://hd.qinpl.cn/index.php?clientid=nickname&nickname=qin&m=member&c=index&a=public_checknickname_ajax&_=1536118036567
                    data:{
                        clientid:'email',
                        email:email_val
                    },
                    timeout:5000,    //超时时间
                    dataType:'script',    //返回的数据格式：json/xml/html/script/jsonp/text

                    success:function(data,textStatus,jqXHR){
                        if (data==1){
                            $('#email_txt').removeClass('show');
                            $('#email_txt').removeClass('label');
                            $('#email_txt').addClass('label_g');
                            $('#email_txt').text('验证成功！');
                            $('#email_txt').addClass('show');
                            $('#email').attr('i',1);
                        }
                        if (data==0){
                            $('#email_txt').removeClass('show');
                            $('#email_txt').removeClass('label_g');
                            $('#email_txt').addClass('label');
                            $('#email_txt').text('邮箱被使用或者禁用！');
                            $('#email_txt').addClass('show');
                        }
                    },
                    error:function(xhr,textStatus){
                        console.log('错误');
                    }
                })
            }
        });
    })
</script>
</body>
</html>
