/*! jQuery v1.9.1 | (c) 2005, 2012 jQuery Foundation, Inc. | jquery.org/license
//@ sourceMappingURL=jquery.min.map
*/
 

/*! fancyBox v2.1.5 fancyapps.com | fancyapps.com/fancybox/#license */
(function(r, G, f, v) {
var J = f("html"),
n = f(r),
p = f(G),
b = f.fancybox = function() {
b.open.apply(this, arguments)
},
I = navigator.userAgent.match(/msie/i),
B = null,
s = G.createTouch !== v,
t = function(a) {
return a && a.hasOwnProperty && a instanceof f
},
q = function(a) {
return a && "string" === f.type(a)
},
E = function(a) {
return q(a) && 0 < a.indexOf("%")
},
l = function(a, d) {
var e = parseInt(a, 10) || 0;
d && E(a) && (e *= b.getViewport()[d] / 100);
return Math.ceil(e)
},
w = function(a, b) {
return l(a, b) + "px"
};
f.extend(b, {
version: "2.1.5",
defaults: {
padding: 15,
margin: 20,
width: 800,
height: 600,
minWidth: 100,
minHeight: 100,
maxWidth: 9999,
maxHeight: 9999,
pixelRatio: 1,
autoSize: !0,
autoHeight: !1,
autoWidth: !1,
autoResize: !0,
autoCenter: !s,
fitToView: !0,
aspectRatio: !1,
topRatio: 0.5,
leftRatio: 0.5,
scrolling: "auto",
wrapCSS: "",
arrows: !0,
closeBtn: !0,
closeClick: !1,
nextClick: !1,
mouseWheel: !0,
autoPlay: !1,
playSpeed: 3E3,
preload: 3,
modal: !1,
loop: !0,
ajax: {
dataType: "html",
headers: {
"X-fancyBox": !0
}
},
iframe: {
scrolling: "auto",
preload: !0
},
swf: {
wmode: "transparent",
allowfullscreen: "true",
allowscriptaccess: "always"
},
keys: {
next: {
13 : "left",
34 : "up",
39 : "left",
40 : "up"
},
prev: {
8 : "right",
33 : "down",
37 : "right",
38 : "down"
},
close: [27],
play: [32],
toggle: [70]
},
direction: {
next: "left",
prev: "right"
},
scrollOutside: !0,
index: 0,
type: null,
href: null,
content: null,
title: null,
tpl: {
wrap: '<div class="fancybox-wrap" tabIndex="-1"><div class="fancybox-skin" style="background-image:url(/mscms/tpl/skins/default_1/images/fancybox_overlay.png);opacity:0.9;filter:alpha(opacity=90);"><div class="fancybox-outer"><div class="fancybox-inner"></div></div></div></div>',
image: '<img class="fancybox-image" src="{href}" alt="" />',
iframe: '<iframe id="fancybox-frame{rnd}" name="fancybox-frame{rnd}" class="fancybox-iframe" frameborder="0" vspace="0" hspace="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen' + (I ? ' allowtransparency="true"': "") + "></iframe>",
error: '<p class="fancybox-error">The requested content cannot be loaded.<br/>Please try again later.</p>',
closeBtn: '<a title="Close" class="fancybox-item fancybox-close" href="javascript:;"></a>',
next: '<a title="Next" class="fancybox-nav fancybox-next" href="javascript:;"><span></span></a>',
prev: '<a title="Previous" class="fancybox-nav fancybox-prev" href="javascript:;"><span></span></a>'
},
openEffect: "fade",
openSpeed: 250,
openEasing: "swing",
openOpacity: !0,
openMethod: "zoomIn",
closeEffect: "fade",
closeSpeed: 250,
closeEasing: "swing",
closeOpacity: !0,
closeMethod: "zoomOut",
nextEffect: "elastic",
nextSpeed: 250,
nextEasing: "swing",
nextMethod: "changeIn",
prevEffect: "elastic",
prevSpeed: 250,
prevEasing: "swing",
prevMethod: "changeOut",
helpers: {
overlay: !0,
title: !0
},
onCancel: f.noop,
beforeLoad: f.noop,
afterLoad: f.noop,
beforeShow: f.noop,
afterShow: f.noop,
beforeChange: f.noop,
beforeClose: f.noop,
afterClose: f.noop
},
group: {},
opts: {},
previous: null,
coming: null,
current: null,
isActive: !1,
isOpen: !1,
isOpened: !1,
wrap: null,
skin: null,
outer: null,
inner: null,
player: {
timer: null,
isActive: !1
},
ajaxLoad: null,
imgPreload: null,
transitions: {},
helpers: {},
open: function(a, d) {
if (a && (f.isPlainObject(d) || (d = {}), !1 !== b.close(!0))) return f.isArray(a) || (a = t(a) ? f(a).get() : [a]),
f.each(a,
function(e, c) {
var k = {},
g, h, j, m, l;
"object" === f.type(c) && (c.nodeType && (c = f(c)), t(c) ? (k = {
href: c.data("fancybox-href") || c.attr("href"),
title: c.data("fancybox-title") || c.attr("title"),
isDom: !0,
element: c
},
f.metadata && f.extend(!0, k, c.metadata())) : k = c);
g = d.href || k.href || (q(c) ? c: null);
h = d.title !== v ? d.title: k.title || "";
m = (j = d.content || k.content) ? "html": d.type || k.type; ! m && k.isDom && (m = c.data("fancybox-type"), m || (m = (m = c.prop("class").match(/fancybox\.(\w+)/)) ? m[1] : null));
q(g) && (m || (b.isImage(g) ? m = "image": b.isSWF(g) ? m = "swf": "#" === g.charAt(0) ? m = "inline": q(c) && (m = "html", j = c)), "ajax" === m && (l = g.split(/\s+/, 2), g = l.shift(), l = l.shift()));
j || ("inline" === m ? g ? j = f(q(g) ? g.replace(/.*(?=#[^\s]+$)/, "") : g) : k.isDom && (j = c) : "html" === m ? j = g: !m && (!g && k.isDom) && (m = "inline", j = c));
f.extend(k, {
href: g,
type: m,
content: j,
title: h,
selector: l
});
a[e] = k
}),
b.opts = f.extend(!0, {},
b.defaults, d),
d.keys !== v && (b.opts.keys = d.keys ? f.extend({},
b.defaults.keys, d.keys) : !1),
b.group = a,
b._start(b.opts.index)
},
cancel: function() {
var a = b.coming;
a && !1 !== b.trigger("onCancel") && (b.hideLoading(), b.ajaxLoad && b.ajaxLoad.abort(), b.ajaxLoad = null, b.imgPreload && (b.imgPreload.onload = b.imgPreload.onerror = null), a.wrap && a.wrap.stop(!0, !0).trigger("onReset").remove(), b.coming = null, b.current || b._afterZoomOut(a))
},
close: function(a) {
b.cancel(); ! 1 !== b.trigger("beforeClose") && (b.unbindEvents(), b.isActive && (!b.isOpen || !0 === a ? (f(".fancybox-wrap").stop(!0).trigger("onReset").remove(), b._afterZoomOut()) : (b.isOpen = b.isOpened = !1, b.isClosing = !0, f(".fancybox-item, .fancybox-nav").remove(), b.wrap.stop(!0, !0).removeClass("fancybox-opened"), b.transitions[b.current.closeMethod]())))
},
play: function(a) {
var d = function() {
clearTimeout(b.player.timer)
},
e = function() {
d();
b.current && b.player.isActive && (b.player.timer = setTimeout(b.next, b.current.playSpeed))
},
c = function() {
d();
p.unbind(".player");
b.player.isActive = !1;
b.trigger("onPlayEnd")
};
if (!0 === a || !b.player.isActive && !1 !== a) {
if (b.current && (b.current.loop || b.current.index < b.group.length - 1)) b.player.isActive = !0,
p.bind({
"onCancel.player beforeClose.player": c,
"onUpdate.player": e,
"beforeLoad.player": d
}),
e(),
b.trigger("onPlayStart")
} else c()
},
next: function(a) {
var d = b.current;
d && (q(a) || (a = d.direction.next), b.jumpto(d.index + 1, a, "next"))
},
prev: function(a) {
var d = b.current;
d && (q(a) || (a = d.direction.prev), b.jumpto(d.index - 1, a, "prev"))
},
jumpto: function(a, d, e) {
var c = b.current;
c && (a = l(a), b.direction = d || c.direction[a >= c.index ? "next": "prev"], b.router = e || "jumpto", c.loop && (0 > a && (a = c.group.length + a % c.group.length), a %= c.group.length), c.group[a] !== v && (b.cancel(), b._start(a)))
},
reposition: function(a, d) {
var e = b.current,
c = e ? e.wrap: null,
k;
c && (k = b._getPosition(d), a && "scroll" === a.type ? (delete k.position, c.stop(!0, !0).animate(k, 200)) : (c.css(k), e.pos = f.extend({},
e.dim, k)))
},
update: function(a) {
var d = a && a.type,
e = !d || "orientationchange" === d;
e && (clearTimeout(B), B = null);
b.isOpen && !B && (B = setTimeout(function() {
var c = b.current;
c && !b.isClosing && (b.wrap.removeClass("fancybox-tmp"), (e || "load" === d || "resize" === d && c.autoResize) && b._setDimension(), "scroll" === d && c.canShrink || b.reposition(a), b.trigger("onUpdate"), B = null)
},
e && !s ? 0 : 300))
},
toggle: function(a) {
b.isOpen && (b.current.fitToView = "boolean" === f.type(a) ? a: !b.current.fitToView, s && (b.wrap.removeAttr("style").addClass("fancybox-tmp"), b.trigger("onUpdate")), b.update())
},
hideLoading: function() {
p.unbind(".loading");
f("#fancybox-loading").remove()
},
showLoading: function() {
var a, d;
b.hideLoading();
a = f('<div id="fancybox-loading"><div></div></div>').click(b.cancel).appendTo("body");
p.bind("keydown.loading",
function(a) {
if (27 === (a.which || a.keyCode)) a.preventDefault(),
b.cancel()
});
b.defaults.fixed || (d = b.getViewport(), a.css({
position: "absolute",
top: 0.5 * d.h + d.y,
left: 0.5 * d.w + d.x
}))
},
getViewport: function() {
var a = b.current && b.current.locked || !1,
d = {
x: n.scrollLeft(),
y: n.scrollTop()
};
a ? (d.w = a[0].clientWidth, d.h = a[0].clientHeight) : (d.w = s && r.innerWidth ? r.innerWidth: n.width(), d.h = s && r.innerHeight ? r.innerHeight: n.height());
return d
},
unbindEvents: function() {
b.wrap && t(b.wrap) && b.wrap.unbind(".fb");
p.unbind(".fb");
n.unbind(".fb")
},
bindEvents: function() {
var a = b.current,
d;
a && (n.bind("orientationchange.fb" + (s ? "": " resize.fb") + (a.autoCenter && !a.locked ? " scroll.fb": ""), b.update), (d = a.keys) && p.bind("keydown.fb",
function(e) {
var c = e.which || e.keyCode,
k = e.target || e.srcElement;
if (27 === c && b.coming) return ! 1; ! e.ctrlKey && (!e.altKey && !e.shiftKey && !e.metaKey && (!k || !k.type && !f(k).is("[contenteditable]"))) && f.each(d,
function(d, k) {
if (1 < a.group.length && k[c] !== v) return b[d](k[c]),
e.preventDefault(),
!1;
if ( - 1 < f.inArray(c, k)) return b[d](),
e.preventDefault(),
!1
})
}), f.fn.mousewheel && a.mouseWheel && b.wrap.bind("mousewheel.fb",
function(d, c, k, g) {
for (var h = f(d.target || null), j = !1; h.length && !j && !h.is(".fancybox-skin") && !h.is(".fancybox-wrap");) j = h[0] && !(h[0].style.overflow && "hidden" === h[0].style.overflow) && (h[0].clientWidth && h[0].scrollWidth > h[0].clientWidth || h[0].clientHeight && h[0].scrollHeight > h[0].clientHeight),
h = f(h).parent();
if (0 !== c && !j && 1 < b.group.length && !a.canShrink) {
if (0 < g || 0 < k) b.prev(0 < g ? "down": "left");
else if (0 > g || 0 > k) b.next(0 > g ? "up": "right");
d.preventDefault()
}
}))
},
trigger: function(a, d) {
var e, c = d || b.coming || b.current;
if (c) {
f.isFunction(c[a]) && (e = c[a].apply(c, Array.prototype.slice.call(arguments, 1)));
if (!1 === e) return ! 1;
c.helpers && f.each(c.helpers,
function(d, e) {
if (e && b.helpers[d] && f.isFunction(b.helpers[d][a])) b.helpers[d][a](f.extend(!0, {},
b.helpers[d].defaults, e), c)
});
p.trigger(a)
}
},
isImage: function(a) {
return q(a) && a.match(/(^data:image\/.*,)|(\.(jp(e|g|eg)|gif|png|bmp|webp|svg)((\?|#).*)?$)/i)
},
isSWF: function(a) {
return q(a) && a.match(/\.(swf)((\?|#).*)?$/i)
},
_start: function(a) {
var d = {},
e, c;
a = l(a);
e = b.group[a] || null;
if (!e) return ! 1;
d = f.extend(!0, {},
b.opts, e);
e = d.margin;
c = d.padding;
"number" === f.type(e) && (d.margin = [e, e, e, e]);
"number" === f.type(c) && (d.padding = [c, c, c, c]);
d.modal && f.extend(!0, d, {
closeBtn: !1,
closeClick: !1,
nextClick: !1,
arrows: !1,
mouseWheel: !1,
keys: null,
helpers: {
overlay: {
closeClick: !1
}
}
});
d.autoSize && (d.autoWidth = d.autoHeight = !0);
"auto" === d.width && (d.autoWidth = !0);
"auto" === d.height && (d.autoHeight = !0);
d.group = b.group;
d.index = a;
b.coming = d;
if (!1 === b.trigger("beforeLoad")) b.coming = null;
else {
c = d.type;
e = d.href;
if (!c) return b.coming = null,
b.current && b.router && "jumpto" !== b.router ? (b.current.index = a, b[b.router](b.direction)) : !1;
b.isActive = !0;
if ("image" === c || "swf" === c) d.autoHeight = d.autoWidth = !1,
d.scrolling = "visible";
"image" === c && (d.aspectRatio = !0);
"iframe" === c && s && (d.scrolling = "scroll");
d.wrap = f(d.tpl.wrap).addClass("fancybox-" + (s ? "mobile": "desktop") + " fancybox-type-" + c + " fancybox-tmp " + d.wrapCSS).appendTo(d.parent || "body");
f.extend(d, {
skin: f(".fancybox-skin", d.wrap),
outer: f(".fancybox-outer", d.wrap),
inner: f(".fancybox-inner", d.wrap)
});
f.each(["Top", "Right", "Bottom", "Left"],
function(a, b) {
d.skin.css("padding" + b, w(d.padding[a]))
});
b.trigger("onReady");
if ("inline" === c || "html" === c) {
if (!d.content || !d.content.length) return b._error("content")
} else if (!e) return b._error("href");
"image" === c ? b._loadImage() : "ajax" === c ? b._loadAjax() : "iframe" === c ? b._loadIframe() : b._afterLoad()
}
},
_error: function(a) {
f.extend(b.coming, {
type: "html",
autoWidth: !0,
autoHeight: !0,
minWidth: 0,
minHeight: 0,
scrolling: "no",
hasError: a,
content: b.coming.tpl.error
});
b._afterLoad()
},
_loadImage: function() {
var a = b.imgPreload = new Image;
a.onload = function() {
this.onload = this.onerror = null;
b.coming.width = this.width / b.opts.pixelRatio;
b.coming.height = this.height / b.opts.pixelRatio;
b._afterLoad()
};
a.onerror = function() {
this.onload = this.onerror = null;
b._error("image")
};
a.src = b.coming.href; ! 0 !== a.complete && b.showLoading()
},
_loadAjax: function() {
var a = b.coming;
b.showLoading();
b.ajaxLoad = f.ajax(f.extend({},
a.ajax, {
url: a.href,
error: function(a, e) {
b.coming && "abort" !== e ? b._error("ajax", a) : b.hideLoading()
},
success: function(d, e) {
"success" === e && (a.content = d, b._afterLoad())
}
}))
},
_loadIframe: function() {
var a = b.coming,
d = f(a.tpl.iframe.replace(/\{rnd\}/g, (new Date).getTime())).attr("scrolling", s ? "auto": a.iframe.scrolling).attr("src", a.href);
f(a.wrap).bind("onReset",
function() {
try {
f(this).find("iframe").hide().attr("src", "//about:blank").end().empty()
} catch(a) {}
});
a.iframe.preload && (b.showLoading(), d.one("load",
function() {
f(this).data("ready", 1);
s || f(this).bind("load.fb", b.update);
f(this).parents(".fancybox-wrap").width("100%").removeClass("fancybox-tmp").show();
b._afterLoad()
}));
a.content = d.appendTo(a.inner);
a.iframe.preload || b._afterLoad()
},
_preloadImages: function() {
var a = b.group,
d = b.current,
e = a.length,
c = d.preload ? Math.min(d.preload, e - 1) : 0,
f,
g;
for (g = 1; g <= c; g += 1) f = a[(d.index + g) % e],
"image" === f.type && f.href && ((new Image).src = f.href)
},
_afterLoad: function() {
var a = b.coming,
d = b.current,
e, c, k, g, h;
b.hideLoading();
if (a && !1 !== b.isActive) if (!1 === b.trigger("afterLoad", a, d)) a.wrap.stop(!0).trigger("onReset").remove(),
b.coming = null;
else {
d && (b.trigger("beforeChange", d), d.wrap.stop(!0).removeClass("fancybox-opened").find(".fancybox-item, .fancybox-nav").remove());
b.unbindEvents();
e = a.content;
c = a.type;
k = a.scrolling;
f.extend(b, {
wrap: a.wrap,
skin: a.skin,
outer: a.outer,
inner: a.inner,
current: a,
previous: d
});
g = a.href;
switch (c) {
case "inline":
case "ajax":
case "html":
a.selector ? e = f("<div>").html(e).find(a.selector) : t(e) && (e.data("fancybox-placeholder") || e.data("fancybox-placeholder", f('<div class="fancybox-placeholder"></div>').insertAfter(e).hide()), e = e.show().detach(), a.wrap.bind("onReset",
function() {
f(this).find(e).length && e.hide().replaceAll(e.data("fancybox-placeholder")).data("fancybox-placeholder", !1)
}));
break;
case "image":
e = a.tpl.image.replace("{href}", g);
break;
case "swf":
e = '<object id="fancybox-swf" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="100%" height="100%"><param name="movie" value="' + g + '"></param>',
h = "",
f.each(a.swf,
function(a, b) {
e += '<param name="' + a + '" value="' + b + '"></param>';
h += " " + a + '="' + b + '"'
}),
e += '<embed src="' + g + '" type="application/x-shockwave-flash" width="100%" height="100%"' + h + "></embed></object>"
} (!t(e) || !e.parent().is(a.inner)) && a.inner.append(e);
b.trigger("beforeShow");
a.inner.css("overflow", "yes" === k ? "scroll": "no" === k ? "hidden": k);
b._setDimension();
b.reposition();
b.isOpen = !1;
b.coming = null;
b.bindEvents();
if (b.isOpened) {
if (d.prevMethod) b.transitions[d.prevMethod]()
} else f(".fancybox-wrap").not(a.wrap).stop(!0).trigger("onReset").remove();
b.transitions[b.isOpened ? a.nextMethod: a.openMethod]();
b._preloadImages()
}
},
_setDimension: function() {
var a = b.getViewport(),
d = 0,
e = !1,
c = !1,
e = b.wrap,
k = b.skin,
g = b.inner,
h = b.current,
c = h.width,
j = h.height,
m = h.minWidth,
u = h.minHeight,
n = h.maxWidth,
p = h.maxHeight,
s = h.scrolling,
q = h.scrollOutside ? h.scrollbarWidth: 0,
x = h.margin,
y = l(x[1] + x[3]),
r = l(x[0] + x[2]),
v,
z,
t,
C,
A,
F,
B,
D,
H;
e.add(k).add(g).width("auto").height("auto").removeClass("fancybox-tmp");
x = l(k.outerWidth(!0) - k.width());
v = l(k.outerHeight(!0) - k.height());
z = y + x;
t = r + v;
C = E(c) ? (a.w - z) * l(c) / 100 : c;
A = E(j) ? (a.h - t) * l(j) / 100 : j;
if ("iframe" === h.type) {
if (H = h.content, h.autoHeight && 1 === H.data("ready")) try {
H[0].contentWindow.document.location && (g.width(C).height(9999), F = H.contents().find("body"), q && F.css("overflow-x", "hidden"), A = F.outerHeight(!0))
} catch(G) {}
} else if (h.autoWidth || h.autoHeight) g.addClass("fancybox-tmp"),
h.autoWidth || g.width(C),
h.autoHeight || g.height(A),
h.autoWidth && (C = g.width()),
h.autoHeight && (A = g.height()),
g.removeClass("fancybox-tmp");
c = l(C);
j = l(A);
D = C / A;
m = l(E(m) ? l(m, "w") - z: m);
n = l(E(n) ? l(n, "w") - z: n);
u = l(E(u) ? l(u, "h") - t: u);
p = l(E(p) ? l(p, "h") - t: p);
F = n;
B = p;
h.fitToView && (n = Math.min(a.w - z, n), p = Math.min(a.h - t, p));
z = a.w - y;
r = a.h - r;
h.aspectRatio ? (c > n && (c = n, j = l(c / D)), j > p && (j = p, c = l(j * D)), c < m && (c = m, j = l(c / D)), j < u && (j = u, c = l(j * D))) : (c = Math.max(m, Math.min(c, n)), h.autoHeight && "iframe" !== h.type && (g.width(c), j = g.height()), j = Math.max(u, Math.min(j, p)));
if (h.fitToView) if (g.width(c).height(j), e.width(c + x), a = e.width(), y = e.height(), h.aspectRatio) for (; (a > z || y > r) && (c > m && j > u) && !(19 < d++);) j = Math.max(u, Math.min(p, j - 10)),
c = l(j * D),
c < m && (c = m, j = l(c / D)),
c > n && (c = n, j = l(c / D)),
g.width(c).height(j),
e.width(c + x),
a = e.width(),
y = e.height();
else c = Math.max(m, Math.min(c, c - (a - z))),
j = Math.max(u, Math.min(j, j - (y - r)));
q && ("auto" === s && j < A && c + x + q < z) && (c += q);
g.width(c).height(j);
e.width(c + x);
a = e.width();
y = e.height();
e = (a > z || y > r) && c > m && j > u;
c = h.aspectRatio ? c < F && j < B && c < C && j < A: (c < F || j < B) && (c < C || j < A);
f.extend(h, {
dim: {
width: w(a),
height: w(y)
},
origWidth: C,
origHeight: A,
canShrink: e,
canExpand: c,
wPadding: x,
hPadding: v,
wrapSpace: y - k.outerHeight(!0),
skinSpace: k.height() - j
}); ! H && (h.autoHeight && j > u && j < p && !c) && g.height("auto")
},
_getPosition: function(a) {
var d = b.current,
e = b.getViewport(),
c = d.margin,
f = b.wrap.width() + c[1] + c[3],
g = b.wrap.height() + c[0] + c[2],
c = {
position: "absolute",
top: c[0],
left: c[3]
};
d.autoCenter && d.fixed && !a && g <= e.h && f <= e.w ? c.position = "fixed": d.locked || (c.top += e.y, c.left += e.x);
c.top = w(Math.max(c.top, c.top + (e.h - g) * d.topRatio));
c.left = w(Math.max(c.left, c.left + (e.w - f) * d.leftRatio));
return c
},
_afterZoomIn: function() {
var a = b.current;
a && (b.isOpen = b.isOpened = !0, b.wrap.css("overflow", "visible").addClass("fancybox-opened"), b.update(), (a.closeClick || a.nextClick && 1 < b.group.length) && b.inner.css("cursor", "pointer").bind("click.fb",
function(d) { ! f(d.target).is("a") && !f(d.target).parent().is("a") && (d.preventDefault(), b[a.closeClick ? "close": "next"]())
}), a.closeBtn && f(a.tpl.closeBtn).appendTo(b.skin).bind("click.fb",
function(a) {
a.preventDefault();
b.close()
}), a.arrows && 1 < b.group.length && ((a.loop || 0 < a.index) && f(a.tpl.prev).appendTo(b.outer).bind("click.fb", b.prev), (a.loop || a.index < b.group.length - 1) && f(a.tpl.next).appendTo(b.outer).bind("click.fb", b.next)), b.trigger("afterShow"), !a.loop && a.index === a.group.length - 1 ? b.play(!1) : b.opts.autoPlay && !b.player.isActive && (b.opts.autoPlay = !1, b.play()))
},
_afterZoomOut: function(a) {
a = a || b.current;
f(".fancybox-wrap").trigger("onReset").remove();
f.extend(b, {
group: {},
opts: {},
router: !1,
current: null,
isActive: !1,
isOpened: !1,
isOpen: !1,
isClosing: !1,
wrap: null,
skin: null,
outer: null,
inner: null
});
b.trigger("afterClose", a)
}
});
b.transitions = {
getOrigPosition: function() {
var a = b.current,
d = a.element,
e = a.orig,
c = {},
f = 50,
g = 50,
h = a.hPadding,
j = a.wPadding,
m = b.getViewport(); ! e && (a.isDom && d.is(":visible")) && (e = d.find("img:first"), e.length || (e = d));
t(e) ? (c = e.offset(), e.is("img") && (f = e.outerWidth(), g = e.outerHeight())) : (c.top = m.y + (m.h - g) * a.topRatio, c.left = m.x + (m.w - f) * a.leftRatio);
if ("fixed" === b.wrap.css("position") || a.locked) c.top -= m.y,
c.left -= m.x;
return c = {
top: w(c.top - h * a.topRatio),
left: w(c.left - j * a.leftRatio),
width: w(f + j),
height: w(g + h)
}
},
step: function(a, d) {
var e, c, f = d.prop;
c = b.current;
var g = c.wrapSpace,
h = c.skinSpace;
if ("width" === f || "height" === f) e = d.end === d.start ? 1 : (a - d.start) / (d.end - d.start),
b.isClosing && (e = 1 - e),
c = "width" === f ? c.wPadding: c.hPadding,
c = a - c,
b.skin[f](l("width" === f ? c: c - g * e)),
b.inner[f](l("width" === f ? c: c - g * e - h * e))
},
zoomIn: function() {
var a = b.current,
d = a.pos,
e = a.openEffect,
c = "elastic" === e,
k = f.extend({
opacity: 1
},
d);
delete k.position;
c ? (d = this.getOrigPosition(), a.openOpacity && (d.opacity = 0.1)) : "fade" === e && (d.opacity = 0.1);
b.wrap.css(d).animate(k, {
duration: "none" === e ? 0 : a.openSpeed,
easing: a.openEasing,
step: c ? this.step: null,
complete: b._afterZoomIn
})
},
zoomOut: function() {
var a = b.current,
d = a.closeEffect,
e = "elastic" === d,
c = {
opacity: 0.1
};
e && (c = this.getOrigPosition(), a.closeOpacity && (c.opacity = 0.1));
b.wrap.animate(c, {
duration: "none" === d ? 0 : a.closeSpeed,
easing: a.closeEasing,
step: e ? this.step: null,
complete: b._afterZoomOut
})
},
changeIn: function() {
var a = b.current,
d = a.nextEffect,
e = a.pos,
c = {
opacity: 1
},
f = b.direction,
g;
e.opacity = 0.1;
"elastic" === d && (g = "down" === f || "up" === f ? "top": "left", "down" === f || "right" === f ? (e[g] = w(l(e[g]) - 200), c[g] = "+=200px") : (e[g] = w(l(e[g]) + 200), c[g] = "-=200px"));
"none" === d ? b._afterZoomIn() : b.wrap.css(e).animate(c, {
duration: a.nextSpeed,
easing: a.nextEasing,
complete: b._afterZoomIn
})
},
changeOut: function() {
var a = b.previous,
d = a.prevEffect,
e = {
opacity: 0.1
},
c = b.direction;
"elastic" === d && (e["down" === c || "up" === c ? "top": "left"] = ("up" === c || "left" === c ? "-": "+") + "=200px");
a.wrap.animate(e, {
duration: "none" === d ? 0 : a.prevSpeed,
easing: a.prevEasing,
complete: function() {
f(this).trigger("onReset").remove()
}
})
}
};
b.helpers.overlay = {
defaults: {
closeClick: !0,
speedOut: 200,
showEarly: !0,
css: {},
locked: !s,
fixed: !0
},
overlay: null,
fixed: !1,
el: f("html"),
create: function(a) {
a = f.extend({},
this.defaults, a);
this.overlay && this.close();
this.overlay = f('<div class="fancybox-overlay"></div>').appendTo(b.coming ? b.coming.parent: a.parent);
this.fixed = !1;
a.fixed && b.defaults.fixed && (this.overlay.addClass("fancybox-overlay-fixed"), this.fixed = !0)
},
open: function(a) {
var d = this;
a = f.extend({},
this.defaults, a);
this.overlay ? this.overlay.unbind(".overlay").width("auto").height("auto") : this.create(a);
this.fixed || (n.bind("resize.overlay", f.proxy(this.update, this)), this.update());
a.closeClick && this.overlay.bind("click.overlay",
function(a) {
if (f(a.target).hasClass("fancybox-overlay")) return b.isActive ? b.close() : d.close(),
!1
});
this.overlay.css(a.css).show()
},
close: function() {
var a, b;
n.unbind("resize.overlay");
this.el.hasClass("fancybox-lock") && (f(".fancybox-margin").removeClass("fancybox-margin"), a = n.scrollTop(), b = n.scrollLeft(), this.el.removeClass("fancybox-lock"), n.scrollTop(a).scrollLeft(b));
f(".fancybox-overlay").remove().hide();
f.extend(this, {
overlay: null,
fixed: !1
})
},
update: function() {
var a = "100%",
b;
this.overlay.width(a).height("100%");
I ? (b = Math.max(G.documentElement.offsetWidth, G.body.offsetWidth), p.width() > b && (a = p.width())) : p.width() > n.width() && (a = p.width());
this.overlay.width(a).height(p.height())
},
onReady: function(a, b) {
var e = this.overlay;
f(".fancybox-overlay").stop(!0, !0);
e || this.create(a);
a.locked && (this.fixed && b.fixed) && (e || (this.margin = p.height() > n.height() ? f("html").css("margin-right").replace("px", "") : !1), b.locked = this.overlay.append(b.wrap), b.fixed = !1); ! 0 === a.showEarly && this.beforeShow.apply(this, arguments)
},
beforeShow: function(a, b) {
var e, c;
b.locked && (!1 !== this.margin && (f("*").filter(function() {
return "fixed" === f(this).css("position") && !f(this).hasClass("fancybox-overlay") && !f(this).hasClass("fancybox-wrap")
}).addClass("fancybox-margin"), this.el.addClass("fancybox-margin")), e = n.scrollTop(), c = n.scrollLeft(), this.el.addClass("fancybox-lock"), n.scrollTop(e).scrollLeft(c));
this.open(a)
},
onUpdate: function() {
this.fixed || this.update()
},
afterClose: function(a) {
this.overlay && !b.coming && this.overlay.fadeOut(a.speedOut, f.proxy(this.close, this))
}
};
b.helpers.title = {
defaults: {
type: "float",
position: "bottom"
},
beforeShow: function(a) {
var d = b.current,
e = d.title,
c = a.type;
f.isFunction(e) && (e = e.call(d.element, d));
if (q(e) && "" !== f.trim(e)) {
d = f('<div class="fancybox-title fancybox-title-' + c + '-wrap">' + e + "</div>");
switch (c) {
case "inside":
c = b.skin;
break;
case "outside":
c = b.wrap;
break;
case "over":
c = b.inner;
break;
default:
c = b.skin,
d.appendTo("body"),
I && d.width(d.width()),
d.wrapInner('<span class="child"></span>'),
b.current.margin[2] += Math.abs(l(d.css("margin-bottom")))
}
d["top" === a.position ? "prependTo": "appendTo"](c)
}
}
};
f.fn.fancybox = function(a) {
var d, e = f(this),
c = this.selector || "",
k = function(g) {
var h = f(this).blur(),
j = d,
k,
l; ! g.ctrlKey && (!g.altKey && !g.shiftKey && !g.metaKey) && !h.is(".fancybox-wrap") && (k = a.groupAttr || "data-fancybox-group", l = h.attr(k), l || (k = "rel", l = h.get(0)[k]), l && ("" !== l && "nofollow" !== l) && (h = c.length ? f(c) : e, h = h.filter("[" + k + '="' + l + '"]'), j = h.index(this)), a.index = j, !1 !== b.open(h, a) && g.preventDefault())
};
a = a || {};
d = a.index || 0; ! c || !1 === a.live ? e.unbind("click.fb-start").bind("click.fb-start", k) : p.undelegate(c, "click.fb-start").delegate(c + ":not('.fancybox-item, .fancybox-nav')", "click.fb-start", k);
this.filter("[data-fancybox-start=1]").trigger("click");
return this
};
p.ready(function() {
var a, d;
f.scrollbarWidth === v && (f.scrollbarWidth = function() {
var a = f('<div style="width:50px;height:50px;overflow:auto"><div/></div>').appendTo("body"),
b = a.children(),
b = b.innerWidth() - b.height(99).innerWidth();
a.remove();
return b
});
if (f.support.fixedPosition === v) {
a = f.support;
d = f('<div style="position:fixed;top:20px;"></div>').appendTo("body");
var e = 20 === d[0].offsetTop || 15 === d[0].offsetTop;
d.remove();
a.fixedPosition = e
}
f.extend(b.defaults, {
scrollbarWidth: f.scrollbarWidth(),
fixed: f.support.fixedPosition,
parent: f("body")
});
a = f(r).width();
J.addClass("fancybox-lock-test");
d = f(r).width();
J.removeClass("fancybox-lock-test");
f("<style type='text/css'>.fancybox-margin{margin-right:" + (d - a) + "px;}</style>").appendTo("head")
})
})(window, document, jQuery);

(function(e) {
function i() {
if (n) {
var e = t[n];
if (e && e["thumb"] && e["thumbInitial"]) {
e["thumb"].src = e["thumbInitial"]
}
}
n = null;
r = null
}
function s(e, s, u) {
i();
if (e) {
var a = e.src;
if (a.indexOf("data:image") == 0) {
return
}
if (a.lastIndexOf("/") > 0) {
var f = a.substring(0, a.lastIndexOf("/") + 1)
}
var l = e.id;
if (!l) {
l = "rid_" + (new Date).getTime();
e.id = l
}
var c = 1;
if (e.src.indexOf("" + f + c + ".jpg") >= 0) {
c = 2
}
t[l] = {
thumb: e,
thumbInitial: a,
prefix: f,
count: s,
ext: ".jpg",
idx: c - 1
};
if (t[l]["thumb"]) {
r = (new Date).getTime();
n = l;
o(l, r, u)
}
}
}
function o(e, i, s) {
var u = t[e];
if (u) {
var a = u["thumb"];
var f = u["prefix"];
var l = u["count"];
var c = u["ext"];
var h = u["idx"];
h = h == l ? 1 : h + 1;
u["idx"] = h;
var p = f + h + (c ? c: ".jpg");
var d = new Image;
d.onload = function() {
if (e == n && i == r) {
if (d.width == 0) {
o(e, i, s)
}
a.src = p;
setTimeout(function() {
o(e, i, s)
},
s * 1e3)
}
};
d.onerror = function() {
if (e == n && i == r) {
o(e, i, s)
}
};
d.src = p;
t[e] = u
}
}
var t = {},
n = null,
r = null;
e.fn.thumbs = function(t) {
this.each(function() {
var n = t || .8;
var r = e(this);
var o = parseInt(r.attr("data-cnt"));
if (o && o > 1) {
r.mouseover(function() {
s(this, o, n)
});
r.mouseout(function() {
i()
})
}
});
return this
}
})(jQuery);

$(document).ready(function() {
String.prototype.trim = function() {
return this.replace(/^\s+/, "").replace(/\s+$/, "")
},
"ontouchstart" in document || $("body").addClass("no-touch"),
$.fn.exists = function() {
return this.length > 0
},
function() {
var a = {},
b = window.pageContext,
c = {
effect: "fadeIn",
placeholder: "data:image/gif;base64,R0lGODlhAQABAIAAAAUEBAAAACwAAAAAAQABAAACAkQBADs=",
threshold: 200
},
d = {
list_videos_my_favourite_videos: 1,
list_videos_my_uploaded_videos: 1,
list_albums_my_favourite_albums: 1,
list_albums_my_created_albums: 1,
list_playlists_my_created_playlists: 1,
list_dvds_my_created_channels: 1,
list_videos_my_channel_videos: 1,
list_members_subscriptions_my_subscriptions: 1,
list_videos_videos_from_my_subscriptions: 1,
list_albums_albums_from_my_subscriptions: 1,
list_videos_my_purchased_videos: 1,
list_albums_my_purchased_albums: 1,
list_members_my_conversations: 1,
list_members_my_friends: 1,
list_messages_my_conversation_messages: 1
},
e = /iphone|ipad|Android|webOS|iPod|BlackBerry|Windows Phone/gi.test(navigator.appVersion),
f = function(a, c) {
if (b && b[c]) for (var d in b[c]) b[c].hasOwnProperty(d) && (a[d] = b[c][d]);
return a
},
g = function(a) {
a.find("img[data-src]").each(function() {
var a = $(this).attr("data-src");
a && (this.src = a, $(this).removeAttr("data-src"))
})
},
h = function(a, b) {
typeof b == "undefined" && (b = 400);
if (a.exists()) {
var c = $(document).scrollTop(),
d = c + $(window).height(),
e = a.offset().top;
if (e > c && e < d) return
}
$.scrollTo(a, b, {
offset: -100
})
},
i = function(a) {
var b = {};
if (a) {
var c = a.split(";");
for (var d = 0; d < c.length; d++) {
var e = c[d].split(":");
if (e.length == 2) {
var f = e[0].split("+");
for (var g = 0; g < f.length; g++) b[f[g]] = decodeURIComponent(e[1]).replace(/[+]/g, " ")
}
}
}
return b
},
j = function(b, c, d, e) {
var f = d.url ? d.url: window.location.href;
f.indexOf("#") > 0 && (f = f.substring(0, f.indexOf("#"))),
$.ajax({
url: f + (f.indexOf("?") >= 0 ? "&": "?") + "mode=async&function=get_block&block_id=" + b + (e ? "&" + $.param(e) : ""),
type: "GET",
cache: !1,
beforeSend: function() {
$(c).block({
message: null
}),
d.beforeSend && d.beforeSend(c)
},
complete: function() {
$(c).unblock(),
d.complete && d.complete(c)
},
success: function(f) {
a[b] = e,
d.success && d.success(c, f)
},
error: function() {
d.error && d.error(c)
}
})
},
k = function(a, b, c) {
var d = window.location.href;
d.indexOf("#") > 0 && (d = d.substring(0, d.indexOf("#"))),
$.ajax({
url: d + (d.indexOf("?") >= 0 ? "&": "?") + "mode=async&format=json&" + $.param(b),
type: "GET",
beforeSend: function() {
$(a).block({
message: null
})
},
complete: function() {
$(a).unblock()
},
success: function(a) {
typeof a != "object" && (a = JSON.parse(a)),
a && c && c(a)
}
})
},
l = function(c, d) {
var e = function(a, b) {
var c = a.parents(".popup-holder");
c.exists() && (a = c),
b ? a.block({
message: null
}) : a.unblock()
},
f = "Unexpected server response received. Please contact support.";
b && b.server_error && (f = b.server_error),
c.ajaxForm({
data: {
format: "json",
mode: "async"
},
beforeSerialize: function() {
var a = c.find("[data-form-populate-from]");
a.each(function() {
var a = $(this).attr("data-form-populate-from");
if (a) {
var b = c.find('[name="' + a + '"]');
b.exists() && $(this).val(b.val())
}
}),
d && d.beforeSerialize && d.beforeSerialize(c)
},
beforeSubmit: function(a) {
var b = c.attr("data-confirm") || "";
if (b && !confirm(b)) return ! 1;
var f = !0;
d && d.beforeSubmit && (f = d.beforeSubmit(c, a)),
e(c, f);
return f
},
uploadProgress: function(a, b, e, f) {
d && d.uploadProgress && d.uploadProgress(c, f)
},
success: function(a, b, g) {
c.find(".generic-error").empty().hide(),
e(c, !1);
if (g.getResponseHeader("Content-Type").indexOf("application/json") >= 0) {
typeof a != "object" && (a = JSON.parse(a));
if (a.status == "failure") {
for (var i = 0; i < a.errors.length; i++) {
var j = a.errors[i],
k = j.field,
l = j.code,
m = j.message,
n = null;
if (k) {
var o = c.find('[name="' + k + '"]');
o.exists() || (o = c.find('[data-name="' + k + '"] [type="text"]')),
o.exists() || (o = c.find('[data-name="' + k + '"] select'));
if (o.exists()) {
o.addClass("error"),
o.parents(".file-control").find('[type="text"]').addClass("error"),
n = o.parent().find(".field-error");
if (!n.exists()) {
var p = o.parent().find("label").text();
p && (m += " (" + p + ")")
}
i == 0 && o.focus()
} else m += " (" + k + ")"
}
if (!n || !n.exists()) n = c.find(".generic-error");
n.empty().text(m).fadeIn();
if (k == "code" && l != "required") {
var q = c.find(".captcha-control img");
q.exists() && (q.attr("src", q.attr("src").replace(new RegExp("rand=\\d+"), "rand=" + (new Date).getTime())), c.find(".captcha-control .textfield").val(""))
}
}
d && d.error && d.error(c),
h(c, 0)
} else if (a.status == "success") if (d && d.success) d.success(c, a.data);
else if (a.redirect) window.location = a.redirect;
else {
var r = $("[data-reload-to]");
r.exists() ? window.location = r.attr("data-reload-to") : window.location.reload()
} else c.find(".generic-error").text(f).show(),
h(c, 0),
d && d.error && d.error(c)
} else g.getResponseHeader("Content-Type").indexOf("text/html") >= 0 ? d && d.success ? d.success(c, a) : $(a).attr("data-fancybox") == "message" || $(a).find('[data-fancybox="message"]').exists() ? $.fancybox($(a), {
topRatio: .3,
beforeClose: function() {
var a = this.inner.find("[data-fancybox-redirect-to]");
a.exists() ? window.location = a.attr("data-fancybox-redirect-to") : window.location.reload();
return ! 0
}
}) : c.empty().append(a) : (c.find(".generic-error").text(f).show(), h(c, 0), d && d.error && d.error(c))
},
error: function() {
e(c, !1),
c.find(".generic-error").text(f).show(),
h(c, 0),
d && d.error && d.error(c)
},
complete: function() {
d && d.complete && d.complete(c)
}
}),
c.find("input, select, textarea").each(function() {
var a = $(this),
b = function() {
var b = a.parent().find(".field-error");
b.fadeOut(),
a.removeClass("error"),
a.parents("fieldset").removeClass("error"),
a.parents(".file-control").find('[type="text"]').removeClass("error")
};
a.change(b),
(a.get(0).tagName.toLowerCase() == "textarea" || a.get(0).type == "text" || a.get(0).type == "password") && a.keypress(b)
}),
c.find('.file-control [type="file"]').change(function() {
var a = $(this),
b = a.val();
b.lastIndexOf("/") >= 0 && (b = b.substring(b.lastIndexOf("/") + 1)),
b.lastIndexOf("\\") >= 0 && (b = b.substring(b.lastIndexOf("\\") + 1));
var c = a.prop("files");
if (c && c.length > 1) {
b = "";
for (var d = 0; d < c.length; d++) {
b && (b += ", ");
if (d >= 3) {
b += "...";
break
}
b += c[d].name
}
}
var e = a.parents(".file-control");
if (a.attr("multiple") && (!c || c.length == 1)) {
var f = e.clone(!0, !0);
f.wrap("<form>").parent("form").trigger("reset"),
f.unwrap(),
e.parent().append(f)
}
e.find('[type="text"]').val(e.find(".button").html().trim() + " " + b)
}),
c.find(".list-selector").each(function() {
var a = $(this);
a.find('[type="text"]').focus(function() {
var b = $(this),
c = a.attr("data-selector"),
d = a.attr("data-name"),
e = (a.attr("data-selected") || "").split(",");
a.find(".list-selector-popup").exists() ? (a.find(".list-selector-popup").show(), a.find('[name="filter"]').focus()) : c && d && $.ajax({
url: c,
type: "GET",
beforeSend: function() {
b.block({
message: null
}),
b.css({
cursor: "wait"
})
},
complete: function() {
b.unblock(),
b.css({
cursor: "text"
})
},
success: function(c) {
var f = [],
g = [],
h = "",
i = $('<div class="list-selector-popup">' + c + "</div>"),
j = i.find('[name="filter"]');
for (var k = 0; k < e.length; k++) {
var l = e[k].trim();
if (l) {
var m = i.find('input[type="checkbox"][value="' + l + '"],input[type="radio"][value="' + l + '"]'),
n = i.find('label[for="' + m.attr("id") + '"]');
m.prop("checked", !0),
f.push(l),
g.push(n.html())
}
}
a.append(i),
i.find('input[type="checkbox"]').click(function() {
var c = $(this),
e = 0,
h = i.find('label[for="' + c.attr("id") + '"]');
if (h.html()) {
var j = c.prop("value");
if (c.prop("checked")) f.push(j),
g.push(h.html()),
a.append($('<input type="hidden" name="' + d + '[]" value="' + j + '"/>'));
else {
for (e = 0; e < f.length; e++) if (f[e] == j) {
f.splice(e, 1),
g.splice(e, 1);
break
}
a.find('input[type="hidden"][value="' + j + '"]').remove()
}
var k = "";
for (e = 0; e < g.length; e++) k != "" && (k += ", "),
k += g[e];
b.prop("value", k),
b.change()
}
}).focus(function() {
j.focus()
}),
i.find('input[type="radio"]').change(function() {
var c = $(this),
e = 0,
h = i.find('label[for="' + c.attr("id") + '"]');
if (h.html()) {
var j = c.prop("value");
c.prop("checked") && (a.find('input[type="hidden"][name="' + d + '[]"]').remove(), f[0] = j, g[0] = h.html(), a.append($('<input type="hidden" name="' + d + '[]" value="' + j + '"/>')));
var k = g[0];
b.prop("value", k),
b.change()
}
}).focus(function() {
j.focus()
}),
j.focus().keyup(function() {
j.val() != h && (h = this.value.toLowerCase(), a.find(".item").each(function() {
var a = $(this);
h == "" ? a.show() : a.toggle(a.find("label").html().toLowerCase().indexOf(h) >= 0)
}))
}),
$(document).mouseup(function(b) { ! a.is(b.target) && a.has(b.target).length === 0 && i.hide()
})
}
})
})
}),
c.find("input[placeholder],textarea[placeholder]").placeholder(),
c.find(".smileys-support img").each(function() {
$(this).attr("title", $(this).attr("alt")),
$(this).click(function() {
var a = $(this).parents(".smileys-support").find("textarea");
if ( !! a.exists()) {
var b = a.get(0),
c = $(this).attr("alt");
if (document.selection) {
b.focus();
var d = document.selection.createRange();
d.text = c,
b.focus()
} else if (b.selectionStart || b.selectionStart == "0") {
var e = b.selectionStart,
f = b.selectionEnd,
g = b.scrollTop;
b.value = b.value.substring(0, e) + c + b.value.substring(f, b.value.length),
b.focus(),
b.selectionStart = e + c.length,
b.selectionEnd = e + c.length,
b.scrollTop = g
} else b.value += c,
b.focus()
}
})
}),
c.find("[data-expand-id]").click(function() {
var b = $(this),
c = b.attr("data-expand-id");
if (c) {
var d = $("#" + c);
b.hasClass("expand") ? (d.slideDown(400,
function() {
$(window).trigger("scroll"),
a.movable && a.movable()
}), b.removeClass("expand").addClass("collapse")) : (d.slideUp(400,
function() {
a.movable && a.movable()
}), b.removeClass("collapse").addClass("expand"))
}
}),
c.find('[data-action="choose"]').each(function() {
$(this).click(function() {
if (!$(this).hasClass("disabled")) {
var a = $(this).parents("form"),
b = $(this).find("input");
a.find('[data-action="choose"] [type="radio"]').prop("checked", !1),
b.prop("checked", !0);
if (b.prop("checked")) {
a.find('[data-action="choose"]').removeClass("active"),
$(this).addClass("active");
var c = a.find(".captcha-control");
c.exists() && (b.attr("name") == "payment_option" ? (c.append(c.parent().find('[type="submit"]')), c.parent().find("label").removeClass("hidden"), c.removeClass("hidden")) : b.attr("name") == "card_package_id" && (c.parent().append(c.find('[type="submit"]')), c.parent().find("label").addClass("hidden"), c.addClass("hidden")))
}
}
})
})
},
m = function(a, b, c) {
$.fancybox([{
href: b,
type: "ajax"
}], {
afterShow: function() {
c || (this.inner.find('[data-form="ajax"]').each(function() {
l($(this))
}), this.inner.find('[data-fancybox="ajax"]').each(function() {
$(this).click(function(a) {
a.preventDefault(),
m($(this), this.href || $(this).attr("data-href"))
})
})),
g(this.inner),
c && c.call(this)
},
beforeClose: function() {
this.inner.find('[data-fancybox="refresh"]').exists() ? a && a.attr("data-fancybox-refresh-id") ? n(a.attr("data-fancybox-refresh-id"), a, !1, !0) : window.location.reload() : a && a.attr("data-fancybox-refresh-id") && n(a.attr("data-fancybox-refresh-id"), a, !1, !0);
return ! 0
},
helpers: {
overlay: {
closeClick: !1
}
},
type: "ajax",
topRatio: .3
})
},
n = function(c, d, e, f) {
if (!c) window.location.reload();
else {
var g = null;
a[c] && (g = a[c]);
var i = {};
i.success = function(d, i) {
a[c] = g;
var j = .1;
f || (j = 1),
e && h($("#" + c)),
$("#" + c).animate({
opacity: j
},
400,
function() {
var a = document.createElement("div");
a.innerHTML = i;
var d = $(a).children().first();
$(d).css("opacity", j),
$(this).replaceWith(d),
$("#" + c).animate({
opacity: 1
},
400),
z($("#" + c));
if (typeof Storage != "undefined") {
var e = "";
b && b.userId && (e = b.userId + ":"),
sessionStorage.setItem(e + location.href + "#" + c, $("#" + c).html()),
sessionStorage.setItem(e + location.href + "#" + c + ":params", JSON.stringify(g))
}
})
};
var k = 0;
i.error = function() {
k++;
var a = !1;
for (var b in g) g.hasOwnProperty(b) && b.indexOf("from") == 0 && parseInt(g[b]) > 1 && (g[b] = parseInt(g[b]) - 1, k > 1 && (g[b] = 1), a = !0);
a || (g = null),
k > 1 && delete i.error,
j(c, d, i, g)
},
j(c, d, i, g)
}
},
o = function() {
$(".navigation button").click(function() {
$(this).parents(".navigation").toggleClass("open")
})
},
p = function() {
var a = $(".tabs-menu li a");
if (a.exists()) {
var b = {},
c = "",
d = "";
a.each(function() {
if ($(this).attr("href").indexOf("#") == 0) {
var a = $(this).attr("href");
if (!d || a == window.location.hash) d = a;
b[a] = $(this),
c += "," + a
}
});
var e = $(c ? c.substr(1) : "");
e.hide(),
d && (b[d].addClass("active"), $(d).show()),
a.click(function(c) {
if ($(this).attr("href").indexOf("#") == 0) {
c.preventDefault();
var d = $(this).attr("href");
a.removeClass("active"),
e.hide(),
$(d).show(),
b[d] && b[d].addClass("active"),
$(window).trigger("scroll")
}
})
}
},
q = function() {
var b = $(".movable-top, .movable-bottom"),
c = function() {
b.each(function() {
var a;
if ($(this).hasClass("movable-top")) {
a = $(this).parent().height() - $(this).height();
if (a > 0) {
var b = $(this).parent().offset().top - $(document).scrollTop(),
c = $(this).parent().height() - $(this).height();
if (b < 0) {
var d = Math.min( - b, c);
$(this).css({
top: d + "px"
})
} else $(this).css({
top: "0px"
})
} else $(this).offset().top > 0 && $(this).css({
top: "0px"
})
} else {
a = $(this).parent().height() - $(this).height();
if (a > 0) {
var e = $(window).height() + $(document).scrollTop(),
f = $(this).height() + $(this).parent().offset().top,
g = e - f;
g > 0 ? (g = Math.min(g, a), $(this).css({
top: g + "px"
})) : $(this).css({
top: "0px"
})
} else $(this).offset().top > 0 && $(this).css({
top: "0px"
})
}
})
};
b.exists() && ($(window).on("scroll", c), b.parent().on("click", c)),
a.movable = c
},
r = function() {
$('[data-fancybox="ajax"]').each(function() {
$(this).click(function(a) {
a.preventDefault(),
m($(this), this.href || $(this).attr("data-href"))
})
}),
$(".block-album .images a.item, .block-screenshots a.item, .list-albums-images a, .list-videos-screenshots a").fancybox({
openEffect: "none",
closeEffect: "none",
prevEffect: "none",
nextEffect: "none",
helpers: {
title: {
type: "inside"
},
buttons: {
position: "bottom"
}
}
}),
window.location.href.indexOf("?login") > 0 && $("#login").click()
},
s = function() {
var a = $(".rating-container"),
b = a.find(".rate-like, .rate-dislike");
b.click(function(c) {
c.preventDefault();
var d = $(this);
if (!d.hasClass("disabled") && !d.hasClass("voted")) {
var e = parseInt(d.attr("data-vote")) || 0,
f = d.attr("data-video-id"),
g = d.attr("data-album-id"),
h = d.attr("data-playlist-id"),
i = d.attr("data-post-id"),
j = d.attr("data-model-id"),
l = d.attr("data-cs-id"),
m = d.attr("data-dvd-id"),
n = d.attr("data-flag-id");
if (f || g || h || j || l || i || m) k(d, {
action: "rate",
video_id: f,
album_id: g,
playlist_id: h,
model_id: j,
cs_id: l,
post_id: i,
dvd_id: m,
vote: e
},
function(c) {
if (c.status == "success") {
b.addClass("disabled"),
d.removeClass("disabled").addClass("voted"),
a.find(".voters").html(a.find(".voters").attr("data-success"));
var f = a.find(".scale"),
g = parseFloat(f.attr("data-rating")),
h = parseInt(f.attr("data-votes"));
if (h > 0) {
g == 0 && (h = 0);
var i = (g * h + e) / (h + 1) / 5 * 100;
i > 100 && (i = 100),
a.find(".scale").css({
width: i + "%"
})
}
} else b.addClass("disabled"),
a.find(".voters").html(a.find(".voters").attr("data-error"))
}),
n && k(d, {
action: "flag",
video_id: f,
album_id: g,
playlist_id: h,
postId: i,
dvdId: m,
flag_id: n
},
function() {})
}
})
},
t = function() {
$(".btn-favourites li a").click(function(a) {
var b = $(this),
c = b.attr("data-video-id"),
d = b.attr("data-album-id"),
e = b.attr("data-fav-type") || 0,
f = b.attr("data-create-playlist-url"),
g = b.attr("data-playlist-id") || 0;
if (c || d) a.preventDefault(),
b.hasClass("delete") ? k(b.parents("li"), {
action: "delete_from_favourites",
video_id: c,
album_id: d,
fav_type: e,
playlist_id: g
},
function(a) {
a.status == "success" && (g > 0 ? (b.parents("li").addClass("hidden"), b.parents("ul").find("#add_playlist_" + g).removeClass("hidden")) : (b.parents("li").addClass("hidden"), b.parents("ul").find("#add_fav_" + e).removeClass("hidden")))
}) : e == 10 && !g ? f && m(b, f,
function() {
var a = this.inner.find("form");
l(a, {
success: function(a, f) {
$.fancybox.close(),
f = $(f),
g = f.attr("data-playlist-id");
var h = f.attr("data-playlist-title");
g && k(b.parents("li"), {
action: "add_to_favourites",
video_id: c,
album_id: d,
fav_type: e,
playlist_id: g
},
function(a) {
if (a.status == "success") {
var c = b.parents("ul").find("#add_playlist_").clone(!0, !0);
c.find("a").each(function() {
$(this).attr("data-playlist-id") && $(this).attr("data-playlist-id", $(this).attr("data-playlist-id").replace("%ID%", g)),
$(this).attr("href") && $(this).attr("href", $(this).attr("href").replace("%ID%", g)),
$(this).html($(this).html().replace("%1%", h))
}),
c.attr("id", "add_playlist_" + g),
c.insertBefore(b.parents("li")),
c = b.parents("ul").find("#delete_playlist_").clone(!0, !0),
c.find("a").each(function() {
$(this).attr("data-playlist-id") && $(this).attr("data-playlist-id", $(this).attr("data-playlist-id").replace("%ID%", g)),
$(this).attr("href") && $(this).attr("href", $(this).attr("href").replace("%ID%", g)),
$(this).html($(this).html().replace("%1%", h))
}),
c.attr("id", "delete_playlist_" + g),
c.removeClass("hidden"),
c.insertBefore(b.parents("li"))
}
})
}
})
}) : k(b.parents("li"), {
action: "add_to_favourites",
video_id: c,
album_id: d,
fav_type: e,
playlist_id: g
},
function(a) {
a.status == "success" && (g > 0 ? (b.parents("li").addClass("hidden"), b.parents("ul").find("#delete_playlist_" + g).removeClass("hidden")) : (b.parents("li").addClass("hidden"), b.parents("ul").find("#delete_fav_" + e).removeClass("hidden")))
})
})
},
u = function() {
var a = $(".block-flagging");
if (a.exists()) {
var b = a.find("form");
b.exists() && l(b, {
success: function(a) {
a.find(".success").show(),
a.find(".block-radios, .block-textarea").hide()
}
})
}
},
v = function() {
var a = $(".block-share");
a.exists() && (typeof window.getEmbed == "function" && a.find(".embed-code").val(window.getEmbed()), a.find(".embed-button").click(function(b) {
b.preventDefault();
if (typeof window.getEmbed == "function") {
var c = $(this).attr("data-embed-size");
if (c && c.indexOf("x") > 0) {
var d = parseInt(c.substr(0, c.indexOf("x"))),
e = parseInt(c.substr(c.indexOf("x") + 1));
a.find(".embed-code").val(window.getEmbed(d, e))
}
}
}), a.find(".embed-code-custom-width, .embed-code-custom-height").on("keyup blur",
function() {
var b = a.find(".embed-code-custom-width"),
c = a.find(".embed-code-custom-height");
parseInt(b.val()) && parseInt(c.val()) && (a.find(".embed-code-custom-width-label").html(parseInt(b.val())), a.find(".embed-code-custom-height-label").html(parseInt(c.val())), a.find(".embed-button-custom").attr("data-embed-size", parseInt(b.val()) + "x" + parseInt(c.val())))
}))
},
w = function() {
var c = $(".block-comments"),
d = c.find(".block-new-comment");
if (c.exists() && d.exists()) {
c.find(".toggle-button").click(function(b) {
b.preventDefault(),
$(this).toggleClass("active"),
d.toggle(),
c.find(".success").hide();
if (d.is(":visible")) {
var e = d.find(".captcha-control img");
e.exists() && e.attr("src", e.attr("src").replace(new RegExp("rand=\\d+"), "rand=" + (new Date).getTime()))
}
g(d),
a.movable && a.movable()
});
var e = c.find("form");
e.exists() && l(e, {
success: function(f, g) {
var h = f.find('[name="anonymous_username"]'),
i = h.val();
i && $.cookie("kt_anonymous_username", i, {
path: "/"
}),
f.get(0).reset(),
h.val(i || "");
var k = f.find(".captcha-control img");
k.exists() && k.attr("src", k.attr("src").replace(new RegExp("rand=\\d+"), "rand=" + (new Date).getTime())),
c.find(".toggle-button").exists() && (d.hide(), c.find(".toggle-button").removeClass("active"));
var l = c.attr("data-block-id"),
m = $(".list-comments");
if (g && g.approved && l && m.exists()) {
var n = {
success: function(c, d) {
if (typeof Storage != "undefined") {
var e = "";
b && b.userId && (e = b.userId + ":"),
sessionStorage.removeItem(e + location.href + "#" + l),
sessionStorage.removeItem(e + location.href + "#" + l + ":params")
}
var f = document.createElement("DIV");
f.innerHTML = d;
var h = $(f).find('.item[data-comment-id="' + (g.comment_id || g.entry_id) + '"]').addClass("hidden");
m.find("#" + l + "_items").prepend(h),
setTimeout(function() {
m.show(),
h.fadeIn(),
a.movable && a.movable()
},
200)
}
};
j(l, null, n)
} else e.find(".success").show();
a.movable && a.movable()
}
}),
e.find('[name="anonymous_username"]').val($.cookie("kt_anonymous_username") || "")
}
},
x = function() {
$(".list-comments").on("click", ".comment-options a",
function(a) {
var c = $(this),
d = $(this).parents(".item"),
e = $(this).parents(".comment-options"),
f = e.find(".comment-rating"),
h = e.find(".comment-like, .comment-dislike"),
i = d.attr("data-comment-id");
if (c.hasClass("comment-like") || c.hasClass("comment-dislike")) {
a.preventDefault();
if (c.hasClass("disabled")) return;
var m = c.hasClass("comment-dislike") ? -1 : 1;
k(c, {
action: "vote_comment",
vote: m,
comment_id: i
},
function(a) {
if (a.status == "success") {
h.fadeOut();
if (f.exists()) {
var b = parseInt(f.html());
isNaN(b) || (b += m, f.html(b), b > 0 ? f.addClass("positive") : b < 0 ? (f.addClass("negative"), d.addClass("dim-comment")) : b == 0 && (f.removeClass("positive").removeClass("negative"), d.removeClass("dim-comment")))
}
} else h.addClass("disabled")
})
} else c.hasClass("comment-edit") && (a.preventDefault(), $.fancybox($(".popup-edit-comment").clone(!0, !0), {
afterShow: function() {
var a = this.inner.find("form");
a.find('[name="comment_id"], [name="entry_id"]').val(i);
var c = d.find(".original-text").html() || "";
c = c.replace(/<br>/gi, "\n").replace(/&gt;/gi, ">").replace(/&lt;/gi, "<").replace(/&#34;/gi, '"'),
c = c.replace(/<img.*?alt=['"](.*?)['"].*?>/gi, "$1"),
a.find('[name="comment"], [name="entry"]').val(c),
l(a, {
success: function() {
$.fancybox.close();
var a = $(".block-comments"),
c = a.attr("data-block-id");
if (c) {
var e = {
success: function(a, e) {
if (typeof Storage != "undefined") {
var f = "";
b && b.userId && (f = b.userId + ":"),
sessionStorage.removeItem(f + location.href + "#" + c),
sessionStorage.removeItem(f + location.href + "#" + c + ":params")
}
var g = document.createElement("DIV");
g.innerHTML = e;
var h = $(g).find('.item[data-comment-id="' + i + '"] .comment-text').html() || "";
d.find(".comment-text").html(h)
}
};
j(c, null, e)
}
}
}),
g(this.inner)
},
helpers: {
overlay: {
closeClick: !1
}
},
topRatio: .3
}))
})
},
y = function() {
$(".block-additional").get(0) && $(".btn-add").toggle(function() {
$(this).text("- Additional info you'd like to share"),
$(".block-additional").slideDown("slow");
return ! 1
},
function() {
$(this).text("+ Additional info you'd like to share"),
$(".block-additional").slideUp("slow");
return ! 1
})
},
z = function(g) {
function v(a, b, c) {
return function(d) {
if (d.status == "success") {
n(c, b, !0, !0);
if (a.attr("data-refresh-block-ids")) {
var e = a.attr("data-refresh-block-ids").split(",");
for (var f = 0; f < e.length; f++) n(e[f], b, !1, !0)
} else b.attr("data-redirect-url") && (window.location = b.attr("data-redirect-url"))
} else {
for (var g = 0; g < d.errors.length; g++) {
var i = d.errors[g],
j = i.message;
j && a.find(".generic-error").empty().text(j).fadeIn()
}
h($("#" + c), 0)
}
}
}
if (!g) {
g = $(document);
if (typeof Storage != "undefined") {
var o = {};
g.find('[data-action="ajax"]').each(function() {
var a = $(this).attr("data-block-id");
o[a] || (o[a] = !0)
});
var p = "";
b && b.userId && (p = b.userId + ":");
for (var q in o) if (o.hasOwnProperty(q)) {
var r = sessionStorage.getItem(p + location.href + "#" + q);
r || (r = sessionStorage.getItem(location.href + "#" + q)),
r && $("#" + q).html(r).find('[data-fancybox="ajax"]').each(function() {
$(this).click(function(a) {
a.preventDefault(),
m($(this), this.href || $(this).attr("data-href"))
})
});
var s = sessionStorage.getItem(p + location.href + "#" + q + ":params");
s || (s = sessionStorage.getItem(location.href + "#" + q + ":params"));
if (s) {
try {
a[q] = JSON.parse(s)
} catch(t) {}
d[q] && ($("#" + q).find("img.lazy-load").removeClass("lazy-load"), n(q, q, !1, !1))
}
}
}
} else g.find('[data-fancybox="ajax"]').each(function() {
$(this).click(function(a) {
a.preventDefault(),
m($(this), this.href || $(this).attr("data-href"))
})
});
$.fn.lazyload && (e ? g.find("img.lazy-load").each(function() {
var a = $(this).attr("data-original");
a && (this.src = a)
}) : g.find("img.lazy-load").lazyload(f(c, "lazyload"))),
$.fn.thumbs && (e || g.find("img[data-cnt]").thumbs()),
g.find('[data-action="ajax"]').click(function(a) {
a.preventDefault();
var c = {},
e = $(this),
f = e.attr("data-append-items-to"),
g = parseInt(e.attr("data-max-queries")) || 0,
k = e.attr("data-block-id");
if ( !! k) {
var l = e.attr("data-container-id");
if (g && f) {
var m = parseInt($("#" + f).attr("data-current-queries")) || 0;
if (m < g) m++,
m == g ? $("#" + l).remove() : $("#" + f).attr("data-current-queries", m);
else return
}
var n = i(e.attr("data-parameters")),
o = "";
b && b.userId && (o = b.userId + ":"),
c.success = function(a, b) {
if (f) {
var c = document.createElement("DIV");
c.innerHTML = b;
if (l) {
var e = $(c).find("#" + l);
e.exists() ? ($("#" + l).replaceWith(e), z(e)) : $("#" + l).remove()
}
var g = $(c).find("#" + f + " .item");
g.css({
display: "none"
}),
$("#" + f).attr("data-append-to-beginning") == "true" ? g.insertBefore($("#" + f).find(".item").first()) : g.insertAfter($("#" + f).find(".item").last()),
g.fadeIn().promise().done(function() {
for (var a in n) if (n.hasOwnProperty(a) && a.indexOf("from") == 0 && parseInt(n[a]) > 1) {
delete n[a];
break
}
d[k] || typeof Storage != "undefined" && (sessionStorage.setItem(o + location.href + "#" + k, $("#" + k).html()), sessionStorage.setItem(o + location.href + "#" + k + ":params", JSON.stringify(n)))
}),
z(g)
} else h($("#" + k)),
$("#" + k).animate({
opacity: .1
},
400,
function() {
var a = document.createElement("div");
a.innerHTML = b;
var c = $(a).find("#" + k);
$(c).css("opacity", "0.1"),
$(this).replaceWith(c),
$("#" + k).animate({
opacity: 1
},
400),
z($("#" + k)),
typeof Storage != "undefined" && (sessionStorage.setItem(o + location.href + "#" + k, $("#" + k).html()), sessionStorage.setItem(o + location.href + "#" + k + ":params", JSON.stringify(n)))
})
},
j(k, l ? $("#" + l) : e, c, n)
}
}),
g.find("[data-rt]").mousedown(function() {
var a = $(this).attr("data-rt");
if (a) {
var b = window.location.href;
b.indexOf("#") > 0 && (b = b.substring(0, b.indexOf("#")));
var c = new Image;
c.src = b + (b.indexOf("?") >= 0 ? "&": "?") + "mode=async&action=rotator_videos&pqr=" + a,
$(this).attr("data-rt", "")
}
}),
g.find("[data-playlist-item]").click(function(b) {
b.preventDefault(),
g.find("[data-playlist-item]").removeClass("selected");
var c = $(this);
c.addClass("selected");
var d = c.attr("data-playlist-item");
if (d) {
a.playlist_state = d;
var e = {};
e.url = d,
e.success = function(a, b) {
$(".player").html("").append($(b.trim()).find(".player-holder")),
$(".player-holder").find('[data-fancybox="ajax"]').each(function() {
$(this).click(function(a) {
a.preventDefault(),
m($(this), this.href || $(this).attr("data-href"))
})
}),
$(".player-holder").find('[data-form="ajax"]').each(function() {
l($(this))
}),
setTimeout(function() {
h($(".player"), 0)
},
0)
},
j("video_view_video_view", c, e)
}
});
if (!a.playlist_state) {
var u = g.find("[data-playlist-item]").first();
u.exists() && u.addClass("selected").click()
} else g.find("[data-playlist-item]").each(function() {
$(this).attr("data-playlist-item") == a.playlist_state && $(this).addClass("selected")
});
g.find("[data-fav-video-id]").click(function(a) {
a.preventDefault(),
a.stopPropagation();
var c = $(this),
d = c.attr("data-fav-video-id"),
e = c.attr("data-fav-type") || 0;
k(c, {
action: "add_to_favourites",
video_id: d,
video_ids: [d],
fav_type: e,
playlist_id: 0
},
function(a) {
a.status == "failure" && a.errors && a.errors[0] && a.errors[0].code == "not_logged_in" ? b && b.loginUrl && m(c, b.loginUrl) : c.addClass("fixed")
})
}),
g.find("[data-fav-album-id]").click(function(a) {
a.preventDefault(),
a.stopPropagation();
var c = $(this),
d = c.attr("data-fav-album-id"),
e = c.attr("data-fav-type") || 0;
k(c, {
action: "add_to_favourites",
album_id: d,
album_ids: [d],
fav_type: e
},
function(a) {
a.status == "failure" && a.errors && a.errors[0] && a.errors[0].code == "not_logged_in" ? b && b.loginUrl && m(c, b.loginUrl) : c.addClass("fixed")
})
}),
g.find('[data-action="select"]').each(function() {
$(this).click(function(a) {
if (!$(this).hasClass("disabled")) {
var b = $(this).parents("form"),
c = $(this).find("input");
$(a.target).is(c) || c.prop("checked", !c.prop("checked"));
var d = parseInt(b.attr("data-selected-cnt")) || 0;
c.prop("checked") ? ($(this).addClass("active"), d++) : ($(this).removeClass("active"), d = Math.max(d - 1, 0)),
b.find('input[data-mode="selection"]').prop("disabled", d == 0),
b.find('input[data-action="select_all"]').toggleClass("active", d == b.find("input[type=checkbox]").length - b.find("input[type=checkbox][disabled]").length),
b.attr("data-selected-cnt", d)
}
})
}),
g.find('[data-action="choose"]').each(function() {
$(this).click(function() {
if (!$(this).hasClass("disabled")) {
var a = $(this).parents("form"),
b = $(this).find("input");
b.prop("checked", !0),
b.prop("checked") && (a.find('[data-action="choose"]').removeClass("active"), $(this).addClass("active"))
}
})
}),
g.find('[data-action="delete"]').each(function() {
$(this).click(function(a) {
a.preventDefault();
if (!$(this).hasClass("disabled")) {
var b = $(this).parents("form"),
c = $(this),
d = c.attr("data-confirm") || "";
if (!d || confirm(d)) {
var e = c.attr("data-id");
if (!e) return;
var f = b.attr("data-block-id"),
g = i(b.attr("data-parameters"));
g["function"] = "get_block",
g.block_id = f,
g["delete"] = [e],
k(c, g, v(b, c, f))
}
}
})
}),
g.find("form[data-controls]").each(function() {
var a = $(this),
b = a.attr("data-block-id");
a.find('input[type="button"]').each(function() {
$(this).click(function(c) {
c.preventDefault();
var d = $(this),
e = d.attr("data-confirm") || "";
if (e) {
var f = parseInt(a.attr("data-selected-cnt")) || 0;
e = e.replace(/\[count\](.*)\[\/count\]/gi,
function(a, b) {
var c = "",
d = b.split("||");
for (var e = 0; e < d.length; e++) {
var g = d[e].split(":", 2);
if (g.length == 1) c = g[0].trim();
else {
var h = g[0].split(",");
for (var i = 0; i < h.length; i++) {
var j = h[i].trim();
if (j.indexOf("//") == 0) {
if (f % 100 == parseInt(j.substring(2))) return g[1].trim().replace("%1%", "" + f)
} else if (j.indexOf("/") == 0) {
if (f % 10 == parseInt(j.substring(1))) return g[1].trim().replace("%1%", "" + f)
} else if (f == parseInt(g[0].trim())) return g[1].trim().replace("%1%", "" + f)
}
}
}
return c
}).replace("%1%", "" + f)
}
var g = {};
if (!e || confirm(e)) if (d.attr("data-action") == "select_all") d.hasClass("active") ? a.find("input[type=checkbox]").each(function() {
this.checked && $(this).click()
}) : a.find("input[type=checkbox]").each(function() {
this.checked || $(this).click()
});
else if (d.attr("data-action") == "delete_multi") g = i(a.attr("data-parameters")),
g["function"] = "get_block",
g.block_id = b,
g["delete"] = [],
a.find("input[type=checkbox]").each(function() {
this.checked && g["delete"].push(this.value)
}),
k(d, g, v(a, d, b));
else if (d.attr("data-action") == "move_multi") {
var h = d.attr("data-href");
h && m(d, h,
function() {
var c = this.inner.find("form");
l(c, {
beforeSubmit: function(c) {
$.fancybox.close();
var e = parseInt(c.find('[name="playlist_id"]:checked').val());
if (e) g = i(a.attr("data-parameters")),
g["function"] = "get_block",
g.block_id = b,
g.move_to_playlist_id = e,
g["delete"] = [],
a.find("input[type=checkbox]").each(function() {
this.checked && g["delete"].push(this.value)
}),
k(d, g, v(a, d, b));
else {
var f = c.attr("data-create-playlist-url");
f && m(d, f,
function() {
var c = this.inner.find("form");
l(c, {
success: function(c, f) {
$.fancybox.close(),
f = $(f),
e = f.attr("data-playlist-id"),
e && (g = i(a.attr("data-parameters")), g["function"] = "get_block", g.block_id = b, g.move_to_playlist_id = e, g["delete"] = [], a.find("input[type=checkbox]").each(function() {
this.checked && g["delete"].push(this.value)
}), k(d, g, v(a, d, b)))
}
})
})
}
return ! 1
}
})
})
} else if (d.attr("data-action") == "redirect") {
var j = d.attr("data-redirect-url");
if (!j) return;
window.location = j
} else if (d.attr("data-action") == "delete_playlist") {
var n = d.attr("data-id");
if (!n) return;
g.action = "delete_playlists",
g["delete"] = [n],
k(d, g, v(a, d, b))
} else if (d.attr("data-action") == "delete_dvd") {
var o = d.attr("data-id");
if (!o) return;
g.action = "delete_dvds",
g["delete"] = [o],
k(d, g, v(a, d, b))
}
})
})
}),
a.movable && a.movable()
},
A = function() {
$('[data-form="ajax"]').each(function() {
l($(this))
})
},
B = function() {
var a = $("[data-subscribe-to], [data-unsubscribe-to]");
a.click(function(a) {
a.preventDefault();
var b = $(this);
if (!b.hasClass("done")) {
var c = b.attr("data-subscribe-to") || b.attr("data-unsubscribe-to"),
d = b.attr("data-id");
if (c && d) {
var e = {
action: "subscribe"
};
b.attr("data-subscribe-to") || (e.action = "unsubscribe"),
c == "category" ? e[e.action + "_category_id"] = d: c == "model" ? e[e.action + "_model_id"] = d: c == "content_source" ? e[e.action + "_cs_id"] = d: c == "user" ? e[e.action + "_user_id"] = d: c == "playlist" ? e[e.action + "_playlist_id"] = d: c == "dvd" && (e[e.action + "_dvd_id"] = d),
k(b, e,
function(a) {
if (a.status == "success") {
b.addClass("done");
var c = b.parents().first().find(".button-info");
c.exists() && (e.action == "subscribe" ? c.html(parseInt(c.html()) + 1) : c.html(parseInt(c.html()) - 1))
}
})
}
}
})
},
C = function() {
if (typeof Storage != "undefined") {
var c = "";
b && b.userId && (c = b.userId + ":");
var d = sessionStorage.getItem(c + location.href + "#search_filter");
d || (d = sessionStorage.getItem(location.href + "#search_filter"));
if (d) {
d = JSON.parse(d);
for (var e in d) $("#" + e).prop("checked", !0);
d.search_string_filter || $("#search_string_filter").prop("checked", !1)
}
}
$("#search_form").submit(function(a) {
try {
if (this.q.value == "") {
this.q.focus(),
a.preventDefault();
return
}
if ($(this).attr("data-url")) {
var b = this.q.value.replace(/[&]/, "%26").replace(/[?]/, "%3F").replace(/[/] / ,
"%2F");
window.location = $(this).attr("data-url").replace("%QUERY%", encodeURIComponent(b)),
a.preventDefault()
}
} catch(a) {}
}),
$("#search_form .search-button").click(function() {
$(this).submit()
}),
$("[data-search-filter-ids] input").click(function() {
var c = $(this).parents("[data-search-filter-ids]");
if (typeof Storage != "undefined") {
var d = "";
b && b.userId && (d = b.userId + ":");
var e = sessionStorage.getItem(d + location.href + "#search_filter");
e || (e = sessionStorage.getItem(location.href + "#search_filter")),
e ? e = JSON.parse(e) : e = {
search_string_filter: !0
},
$(this).attr("id") && ($(this).prop("checked") ? e[$(this).attr("id")] = !0 : delete e[$(this).attr("id")]),
sessionStorage.setItem(d + location.href + "#search_filter", JSON.stringify(e))
}
var f = c.attr("data-search-filter-ids").split(","),
g = {};
c.find("input").each(function() {
var a = $(this);
if (a.prop("type") == "hidden" || a.prop("type") == "checkbox" && a.prop("checked")) if (a.prop("name").indexOf("[]") > 0) {
var b = a.prop("name").replace("[]", "");
g[b] = a.prop("value") + (g[b] ? "," + g[b] : "")
} else g[a.prop("name")] = a.prop("value")
});
for (var h in g) g.hasOwnProperty(h) && g[h] == "all" && delete g[h];
for (var i = 0; i < f.length; i++) a[f[i]] = g,
n(f[i], c, !1, !0)
})
},
D = function() {
$('[data-form="ajax-upload"]').each(function() {
var a = $(this),
b = a.attr("data-redirect-url"),
c = a.attr("data-progress-url"),
d = 0,
e = null,
f = function(b) {
b = Math.min(b || 0, 100),
b > d && (a.find(".progressbar .progress").stop(!0, !0).animate({
width: b + "%"
}), a.find(".progressbar .text").html(b + "%"), d = b)
};
l(a, {
success: function(a, c) {
a.find(".progressbar .progress").css({
width: "100%"
}),
c && c.filename && b && (window.location = b.replace("%HASH%", c.filename))
},
beforeSerialize: function(a) {
var b = "";
if (a.find('[name="url"]').val() || a.find('[name="content"]').val() || a.find('[name="content[]"]').val() || a.find('[name="embed"]').val()) {
for (var c = 0; c < 32; c++) b += "" + Math.floor(Math.random() * 10);
a.find('[name="filename"]').val(b)
} else a.find('[name="filename"]').val(b)
},
beforeSubmit: function(a) {
d = 0,
a.append($('<div class="progressbar"><div class="progress"></div><div class="text"></div></div>'));
if (a.find('[name="upload_option"]:checked').val() == "url" && c) {
var b = a.find('[name="filename"]').val();
if (b) {
var g = function() {
$.ajax({
url: c.replace("%HASH%", b),
type: "GET",
timeout: 1e4,
success: function(a) {
if (a && a.documentElement) {
var b = $(a.documentElement).find("loaded").text() || 0,
c = $(a.documentElement).find("total").text() || 1;
f(Math.floor(b / c * 100))
}
},
complete: function() {
e = setTimeout(g, 1e3)
}
})
};
e = setTimeout(g, 1e3)
}
}
return ! 0
},
uploadProgress: function(a, b) {
a.find('[name="upload_option"]:checked').val() != "url" && f(b)
},
complete: function(a) {
a.find(".progressbar").hide().remove(),
e && clearTimeout(e)
}
}),
a.find('[name="upload_option"]').change(function() {
var b = $(this);
if (b.prop("checked")) {
var c = "disabled";
b.val() == "file" ? (a.find('[name="content"]').parents(".file-control").find("input").removeAttr(c).click(), a.find('[name="url"]').attr(c, c).val("").change(), a.find('[name="embed"]').attr(c, c).val("").change().parents(".row").find("label").removeClass("required"), a.find('[name="duration"]').attr(c, c).val("").change().parents(".row").find("label").removeClass("required"), a.find('[name="screenshot"]').parents(".file-control").find("input").attr(c, c).val("").change().parents(".row").find("label").removeClass("required")) : b.val() == "url" ? (a.find('[name="content"]').parents(".file-control").find("input").attr(c, c).val("").change(), a.find('[name="url"]').removeAttr(c).focus(), a.find('[name="embed"]').attr(c, c).val("").change().parents(".row").find("label").removeClass("required"), a.find('[name="duration"]').attr(c, c).val("").change().parents(".row").find("label").removeClass("required"), a.find('[name="screenshot"]').parents(".file-control").find("input").attr(c, c).val("").change().parents(".row").find("label").removeClass("required")) : b.val() == "embed" && (a.find('[name="url"]').attr(c, c).val("").change(), a.find('[name="content"]').parents(".file-control").find("input").attr(c, c).val("").change(), a.find('[name="embed"]').removeAttr(c).focus().parents(".row").find("label").addClass("required"), a.find('[name="duration"]').removeAttr(c).parents(".row").find("label").addClass("required"), a.find('[name="screenshot"]').parents(".file-control").find("input").removeAttr(c).parents(".row").find("label").addClass("required"))
}
});
var g = {
mode: "async",
format: "json",
action: a.find('[name="action"]').val()
};
a.attr("action", (a.attr("action") || "") + ((a.attr("action") || "").indexOf("?") >= 0 ? "&": "?") + $.param(g))
})
},
E = function() {
$('[data-action="message"],[data-action="add_to_friends"]').click(function(a) {
a.preventDefault();
var b = $(this);
if (!b.hasClass("done")) {
var c = ".popup-send-message";
b.attr("data-action") == "add_to_friends" && (c = ".popup-add-to-friends"),
$.fancybox($(c).clone(!0, !0), {
afterShow: function() {
var a = this.inner.find("form");
l(a, {
success: function() {
b.addClass("done"),
$.fancybox.close(),
b.attr("data-action") == "add_to_friends" && window.location.reload()
}
}),
g(this.inner)
},
helpers: {
overlay: {
closeClick: !1
}
},
topRatio: .3
})
}
})
},
F = function() {
var a = $("#send_message_form");
a.exists() && (g(a), l(a, {
success: function(a, b) {
var c = !1;
a.find('[name="message_id"]').val() == b.message_id && (c = !0),
a.get(0).reset(),
a.find('[name="message_id"]').val("");
var d = a.attr("data-block-id"),
e = $(".list-messages");
if (b && d && e.exists()) {
var f = {
success: function(a, f) {
var g = document.createElement("DIV");
g.innerHTML = f;
if (c) e.find('.item[data-message-id="' + b.message_id + '"]').replaceWith($(g).find('.item[data-message-id="' + b.message_id + '"]'));
else {
var h = $(g).find('.item[data-message-id="' + b.message_id + '"]').addClass("hidden");
e.find("#" + d + "_items").append(h),
setTimeout(function() {
e.show(),
h.fadeIn()
},
200)
}
}
};
j(d, null, f)
}
}
})),
$('[data-action="delete_conversation"], [data-action="ignore_conversation"]').click(function(a) {
a.preventDefault();
var b = $(this),
c = b.attr("data-confirm") || "";
if (!c || confirm(c)) {
var d = b.attr("data-user-id");
if (!d) return;
var e = b.attr("data-block-id"),
f = {};
f["function"] = "get_block",
f.block_id = e,
f.action = b.attr("data-action"),
f.conversation_user_id = d,
k(b, f,
function(a) {
a.status == "success" && window.location.reload()
})
}
}),
$(document).on("click", ".list-messages [data-edit-message-id]",
function(a) {
a.preventDefault();
var b = $(this),
c = b.attr("data-edit-message-id");
if ( !! c) {
var d = $("#send_message_form");
if (d.find('[name="message_id"]').val()) return;
d.find('[name="message_id"]').val(c),
h(d);
var e = b.parents('.item[data-message-id="' + c + '"]');
e.addClass("editing");
var f = e.find(".original-text").html() || "";
f = f.replace(/<br>/gi, "\n").replace(/&gt;/gi, ">").replace(/&lt;/gi, "<").replace(/&#34;/gi, '"'),
f = f.replace(/<img.*?alt=['"](.*?)['"].*?>/gi, "$1"),
f = f.trim(),
d.find('[name="message"]').val(f).focus()
}
})
},
G = function() {
var a = function(a) {
var b = window.location.href;
b.indexOf("#") > 0 && (b = b.substring(0, b.indexOf("#"))),
b.indexOf("?") >= 0 ? b += "&": b += "?";
var c = new Image;
c.src = b + "mode=async&action=" + a + "&rand=" + (new Date).getTime()
};
$.cookie("kt_tcookie", "1", {
expires: 7,
path: "/"
}),
$.cookie("kt_tcookie") == "1" && (a("js_stats"), b && b.videoId && a("js_stats_view_video"), b && b.albumId && a("js_stats_view_album"));
if (b && b.userId) {
var c = function() {
a("js_online_status")
};
c(),
setInterval(c, 6e4)
}
},
H = function() {
var a = $('[data-autoscroll="true"]');
a.exists() && h(a.first())
},
I = [o, p, q, r, s, t, u, v, w, x, y, z, A, B, C, D, E, F, G, H];
for (var J = 0; J < I.length; J++) if (typeof I[J] == "function") try {
I[J].call(this)
} catch(K) {
console && console.error && console.error(K)
}
} ()
})